<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Goger Browser Professional</title>
    <style>
        :root {
            --goger-blue: #4285F4;
            --header-bg: #dee1e6;
            --tab-active: #ffffff;
            --text-color: #3c4043;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, sans-serif; }
        body { background: #ffffff; height: 100vh; display: flex; flex-direction: column; overflow: hidden; color: var(--text-color); }

        /* HEADER Y PESTA√ëAS */
        .app-header { background: var(--header-bg); display: flex; flex-direction: column; border-bottom: 1px solid #bcbcbc; }
        .tabs-row { display: flex; align-items: center; padding: 8px 10px 0; gap: 5px; }
        .tabs-scroll { display: flex; gap: 4px; overflow-x: auto; flex-grow: 1; scrollbar-width: none; }
        .tab { 
            background: #bdc1c6; padding: 8px 15px; border-radius: 8px 8px 0 0; 
            font-size: 12px; min-width: 150px; cursor: pointer; display: flex; justify-content: space-between; align-items: center;
        }
        .tab.active { background: white; font-weight: bold; }

        /* BARRA DE NAVEGACI√ìN */
        .nav-controls { background: white; display: flex; align-items: center; padding: 5px 10px; gap: 8px; border-top: 1px solid #ddd; position: relative; }
        .address-bar { flex-grow: 1; background: #f1f3f4; border-radius: 20px; padding: 6px 15px; border: 1px solid #dfe1e5; outline: none; font-size: 14px; }
        .btn { background: none; border: none; font-size: 18px; cursor: pointer; padding: 6px; border-radius: 50%; transition: 0.2s; display: flex; align-items: center; justify-content: center; }
        .btn:hover { background: rgba(0,0,0,0.1); }
        .btn-menu-active { background: #d1d3d6 !important; }

        /* MEN√ö PROFESIONAL (ESTILO IMAGEN) */
        .dropdown-menu { 
            position: absolute; top: 45px; right: 10px; width: 280px; 
            background: white; border-radius: 8px; box-shadow: 0 8px 30px rgba(0,0,0,0.25); 
            display: none; flex-direction: column; padding: 8px 0; z-index: 9999;
            border: 1px solid #ddd;
        }
        .menu-item { 
            padding: 10px 20px; display: flex; align-items: center; justify-content: space-between;
            font-size: 14px; cursor: pointer;
        }
        .menu-item:hover { background: #f1f3f4; }
        .menu-item i { width: 25px; font-style: normal; }
        .shortcut { color: #888; font-size: 11px; font-weight: normal; }
        .separator { height: 1px; background: #eee; margin: 4px 0; }

        /* CONTENIDO */
        #content-wrapper { flex-grow: 1; position: relative; }
        .view { display: none; width: 100%; height: 100%; }
        .view.active { display: block; }
        iframe { width: 100%; height: 100%; border: none; }

        .home-screen { height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; background: white; }
        .goger-logo { width: 250px; margin-bottom: 20px; user-select: none; }
    </style>
</head>
<body>

    <div class="app-header">
        <div class="tabs-row">
            <div class="tabs-scroll" id="tabsBar"></div>
            <button class="btn" onclick="createNewTab()" title="Nueva pesta√±a">+</button>
        </div>
        <div class="nav-controls">
            <button class="btn" onclick="reloadTab()" title="Recargar">üîÑ</button>
            <input type="text" class="address-bar" id="globalSearch" placeholder="Busca en Bing o escribe URL..." onkeypress="handleSearch(event)">
            
            <button class="btn" id="menuBtn" onclick="toggleMenu()" title="Men√∫ de Goger">‚ò∞</button>

            <div class="dropdown-menu" id="mainMenu">
                <div class="menu-item" onclick="createNewTab()"><span><i>üìÑ</i> Nueva pesta√±a</span> <span class="shortcut">Ctrl+T</span></div>
                <div class="menu-item"><span><i>üî≤</i> Nueva ventana</span> <span class="shortcut">Ctrl+N</span></div>
                <div class="separator"></div>
                <div class="menu-item"><span><i>‚≠ê</i> Favoritos</span> <span class="shortcut">Ctrl+May√∫s+O</span></div>
                <div class="menu-item"><span><i>üïí</i> Historial</span> <span class="shortcut">Ctrl+H</span></div>
                <div class="menu-item"><span><i>üì•</i> Descargas</span> <span class="shortcut">Ctrl+J</span></div>
                <div class="separator"></div>
                <div class="menu-item" style="color: var(--goger-blue); font-weight: bold;" onclick="makeExeAction()">
                    <span><i>‚öôÔ∏è</i> Crear EXE (Web2App)</span>
                </div>
                <div class="menu-item"><span><i>üõ†Ô∏è</i> M√°s herramientas</span> <span>‚ñ∂</span></div>
            </div>
        </div>
    </div>

    <div id="content-wrapper"></div>

    <script>
        let tabs = JSON.parse(localStorage.getItem('goger_pro_tabs')) || [];
        let activeTabId = null;

        // FUNCI√ìN ABRIR/CERRAR MEN√ö
        function toggleMenu() {
            const menu = document.getElementById('mainMenu');
            const btn = document.getElementById('menuBtn');
            const isVisible = menu.style.display === 'flex';
            
            menu.style.display = isVisible ? 'none' : 'flex';
            btn.classList.toggle('btn-menu-active', !isVisible);
        }

        function makeExeAction() {
            const currentTab = tabs.find(t => t.id === activeTabId);
            const urlToCopy = (currentTab && currentTab.url) ? currentTab.url : "https://www.bing.com";
            
            navigator.clipboard.writeText(urlToCopy).then(() => {
                alert("URL de la pesta√±a copiada autom√°ticamente.\nRedirigiendo a Web2App...");
                window.open("https://www.web2app.vip/", "_blank");
            });
            toggleMenu();
        }

        function createNewTab(url = '', title = 'Nueva pesta√±a') {
            const id = Date.now();
            tabs.push({ id, url, title });
            render();
            switchTab(id);
            localStorage.setItem('goger_pro_tabs', JSON.stringify(tabs));
        }

        function render() {
            const bar = document.getElementById('tabsBar');
            const wrapper = document.getElementById('content-wrapper');
            bar.innerHTML = ''; wrapper.innerHTML = '';

            tabs.forEach(tab => {
                const btn = document.createElement('div');
                btn.className = 'tab' + (tab.id === activeTabId ? ' active' : '');
                btn.onclick = () => switchTab(tab.id);
                btn.innerHTML = `<span>${tab.title}</span> <span onclick="event.stopPropagation(); removeTab(${tab.id})">√ó</span>`;
                bar.appendChild(btn);

                const view = document.createElement('div');
                view.className = 'view' + (tab.id === activeTabId ? ' active' : '');
                view.id = `view-${tab.id}`;
                
                if (!tab.url) {
                    view.innerHTML = `
                        <div class="home-screen">
                            <img src="https://i.ibb.co/pvvR9tf2/5-sin-t-tulo-20251227114906.png" class="goger-logo">
                            <input type="text" class="address-bar" style="width: 80%; max-width: 500px; padding: 12px 20px" placeholder="Busca en Bing..." onkeypress="handleSearch(event)">
                        </div>`;
                } else {
                    view.innerHTML = `<iframe src="${tab.url}"></iframe>`;
                }
                wrapper.appendChild(view);
            });
        }

        function handleSearch(event) {
            if (event.key === 'Enter') {
                const q = event.target.value;
                const tab = tabs.find(t => t.id === activeTabId);
                tab.url = q.includes('://') ? q : `https://www.bing.com/search?q=${encodeURIComponent(q)}`;
                tab.title = q.substring(0, 15);
                render();
                localStorage.setItem('goger_pro_tabs', JSON.stringify(tabs));
            }
        }

        function switchTab(id) {
            activeTabId = id;
            render();
            const tab = tabs.find(t => t.id === id);
            document.getElementById('globalSearch').value = tab.url || '';
        }

        function removeTab(id) {
            tabs = tabs.filter(t => t.id !== id);
            if (tabs.length === 0) createNewTab();
            else switchTab(tabs[0].id);
            localStorage.setItem('goger_pro_tabs', JSON.stringify(tabs));
        }

        function reloadTab() { render(); }

        // Cerrar men√∫ al hacer clic fuera
        window.onclick = function(event) {
            const menu = document.getElementById('mainMenu');
            const btn = document.getElementById('menuBtn');
            if (!btn.contains(event.target) && !menu.contains(event.target)) {
                menu.style.display = 'none';
                btn.classList.remove('btn-menu-active');
            }
        }

        if (tabs.length === 0) createNewTab();
        else switchTab(tabs[0].id);
    </script>
</body>
</html>
